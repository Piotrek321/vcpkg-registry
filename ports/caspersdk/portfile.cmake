set(VCPKG_POLICY_EMPTY_INCLUDE_FOLDER enabled)

vcpkg_from_github(
  OUT_SOURCE_PATH
  SOURCE_PATH
  REPO
  matterfi/casper-cpp-sdk
  REF
  250de31cab4bd98801d1fde5179769d45c7eeace
  SHA512
  7adfb3631fb936e9ed458d52601cf3dbd7ecf299aa36af485f911dff29c05877b8d3db2d50df51489ec26600edec214ea78191b6e38d5ef0ac1dd12e48fda204
  HEAD_REF
  main
)

vcpkg_cmake_configure(
  SOURCE_PATH
  "${SOURCE_PATH}"
  OPTIONS
  -DCASPERSDK_BUILD_TESTS=OFF
  -DCASPERSDK_MULTICONFIG=OFF
  OPTIONS_RELEASE
  -DCASPERSDK_DEBUG_BUILD=OFF
  -DCASPERSDK_INSTALL_LICENSE=ON
  -DCASPERSDK_LICENSE_FILE_NAME=copyright
  OPTIONS_DEBUG
  -DCASPERSDK_DEBUG_BUILD=ON
  -DCASPERSDK_PEDANTIC_BUILD=OFF
  -DCASPERSDK_INSTALL_HEADERS=OFF
  -DCASPERSDK_INSTALL_LICENSE=OFF
)

vcpkg_cmake_install()

vcpkg_cmake_config_fixup(
  PACKAGE_NAME
  "CasperSDK"
  NO_PREFIX_CORRECTION
)

file(
  INSTALL "${CMAKE_CURRENT_LIST_DIR}/usage"
  DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}"
)
